{"version":3,"file":"popetech-ngx-rest-model.mjs","sources":["../../../projects/ngx-rest-model/src/lib/constants.ts","../../../projects/ngx-rest-model/src/lib/http/api.service.ts","../../../projects/ngx-rest-model/src/lib/models/models.ts","../../../projects/ngx-rest-model/src/lib/models/base-model.ts","../../../projects/ngx-rest-model/src/lib/models/relationship.ts","../../../projects/ngx-rest-model/src/lib/models/model.factory.ts","../../../projects/ngx-rest-model/src/lib/http/backend.service.ts","../../../projects/ngx-rest-model/src/lib/ngx-rest-model.module.ts","../../../projects/ngx-rest-model/src/lib/models/model.interface.ts","../../../projects/ngx-rest-model/src/public_api.ts","../../../projects/ngx-rest-model/src/popetech-ngx-rest-model.ts"],"sourcesContent":["import {InjectionToken} from \"@angular/core\";\n\nexport const CONFIG = new InjectionToken('config');\n","import {Inject, Injectable} from '@angular/core';\n\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { take } from \"rxjs/operators\";\nimport { CONFIG } from '../constants';\n\n@Injectable()\nexport class ApiService {\n\n    private baseUrl: string;\n    private apiRoot: string;\n    private http: HttpClient;\n\n    constructor(http: HttpClient, @Inject(CONFIG) config) {\n        this.http = http;\n        const root = config.api_root;\n\n        this.setBaseUrl(root);\n        this.setApiRoot(root);\n    }\n\n    public setBaseUrl(url: string): void {\n        this.baseUrl = url;\n    }\n\n    public getBaseUrl() {\n        return this.baseUrl;\n    }\n\n    public setApiRoot(url: string): void {\n        this.apiRoot = url;\n    }\n\n    public getApiRoot() {\n        return this.apiRoot;\n    }\n\n    private getUrl(uri, bypassPrefix = false) {\n        if( ! bypassPrefix) {\n            return this.getBaseUrl() + '/' + uri;\n        }\n\n        return this.getApiRoot() + '/' + uri;\n    }\n\n    public get(uri, options = {}, bypassPrefix = false): any {\n        let url = this.getUrl(uri, bypassPrefix);\n        if(options != {}) {\n            return this.http.get(url, options).pipe(take(1));\n        }\n\n        return this.http.get(url).pipe(take(1));\n    }\n\n    public post(uri, payload, bypassPrefix = false, options = {}): any {\n\n        let url = this.getUrl(uri, bypassPrefix);\n\n        if(options != {}) {\n            return this.http.post(url, payload, options).pipe(take(1));\n        }\n\n        return this.http.post(url, payload).pipe(take(1));\n    }\n\n    public put(uri, payload, bypassPrefix = false) {\n        let url = this.getUrl(uri, bypassPrefix);\n\n        return this.http.put(url, payload).pipe(take(1));\n    }\n\n    public delete(uri, options = {}, bypassPrefix = false) {\n        let url = this.getUrl(uri, bypassPrefix);\n\n        return this.http.delete(url).pipe(take(1));\n    }\n}\n","export class Models {\n\n    static models = {};\n\n    static add(model) {\n        let modelName = new model().constructor.name.toLowerCase();\n        if(!Models.models[modelName]) {\n            Models.models[modelName] = model;\n        }\n    }\n\n    static get(model) {\n        return Models.models[model];\n    }\n}","import { ModelFactory } from './model.factory';\nimport { Relationship } from './relationship';\nimport { Serializable } from './serializable.interface';\nimport { Model } from './model.interface';\n\nimport { Models } from './models';\n\nexport class BaseModel implements Model, Serializable {\n\n\n     public modelConfig = {\n         key: '',\n         uri: '',\n         hidden: [],\n         relationships: {}\n    };\n\n    constructor() {}\n\n    setConfig(config) {\n        this.modelConfig = {...this.getConfig(), ...config};\n    }\n\n    getConfig() {\n        return this.modelConfig;\n    }\n\n    getUri() {\n        return this.modelConfig.uri;\n    }\n\n    getSelfUri() {\n        return this.modelConfig.uri + '/' + this[this.modelConfig.key];\n    }\n\n    setUri(uri) {\n        this.modelConfig.uri = uri;\n    }\n\n    getKey() {\n        return this.modelConfig.key;\n    }\n\n    getRelationship(key) {\n        return this.modelConfig.relationships[key];\n    }\n\n    deserialize(input) {\n\n        let config = this.getConfig();\n        let relationships = [];\n        for(let prop in input) {\n            if(! input.hasOwnProperty(prop)) {\n                continue;\n            }\n\n            if(config.hidden.indexOf(prop) > -1) {\n                continue;\n            }\n\n            if(typeof input[prop] === 'object') {\n\n                if(config.relationships.hasOwnProperty(this.snakeToCamel(prop))) {\n                    relationships.push({\n                        key: this.snakeToCamel(prop),\n                        value: (input[prop] ? input[prop].data : null)\n                    });\n                }\n\n                continue;\n            }\n\n            this[this.snakeToCamel(prop)] = input[prop];\n        }\n\n        for(let relationship of relationships) {\n\n            if(relationship.value === null) {\n                continue;\n            }\n\n            let relationshipConfig = config.relationships[relationship.key];\n\n            let related = Models.get(relationshipConfig.model);\n\n            let relationshipObject = new Relationship(this, related, relationshipConfig.type);\n\n            this[relationship.key] = ModelFactory.makeRelatedFromRelationship(relationshipObject, relationship.value);\n        }\n\n        return this;\n    }\n\n    snakeToCamel(string) {\n        return string.replace(/_\\w/g, function(m) {\n            return m[1].toUpperCase();\n        });\n    }\n}\n","import { BaseModel } from './base-model';\n\nexport class Relationship {\n\n    constructor(protected model, protected related, protected type) {}\n\n    setRelated(related) {\n        this.related = related;\n    }\n\n    getRelated() {\n        return this.related;\n    }\n\n    setModel(model) {\n        this.model = model;\n    }\n\n    create() {\n        // if the related model isn't instantiated,\n        // instantiate it here\n        if( ! (this.related instanceof BaseModel)) {\n            this.related = new this.related();\n        }\n\n        if(this.type == 'hasMany' || this.type == 'hasOne') {\n            this.related.setUri(this.model.getSelfUri() + '/' + this.related.getUri());\n            return this.related;\n        }\n\n        if(this.type == 'belongsTo') {\n            return this.related;\n        }\n    }\n\n    getModel() {\n\n    }\n\n    getUri() {\n\n    }\n}","import { Relationship } from './relationship';\nimport { Models } from \"./models\";\n\nexport class ModelFactory {\n\n    static make(model, data) {\n        return new model().deserialize(data);\n    }\n\n    static makeFromArray(model, array) {\n        let models = [];\n        for(let ii = 0; ii < array.length; ++ii) {\n            models.push(new model().deserialize(array[ii]));\n        }\n        return models;\n    }\n\n    static makeRelated(model, related, key) {\n        let relationshipConfig = model.getRelationship(key);\n\n        let relationship = new Relationship(model, related, relationshipConfig.type);\n\n        model[key] = relationship.create();\n\n        model.setUri(model[key].getSelfUri() + '/' + model.getUri());\n\n        return model;\n    }\n\n    static makeRelatedFromRelationship(relationship, input) {\n        if(relationship.type == 'hasOne' || relationship.type == 'belongsTo') {\n            return relationship.create().deserialize(input);\n        } else if(relationship.type == 'hasMany') {\n            const related = relationship.getRelated();\n            // let constructor = Models.get(related.key);\n            return ModelFactory.makeFromArray(related, input);\n        }\n\n    }\n\n}","import { Injectable } from '@angular/core';\nimport {HttpParams} from \"@angular/common/http\";\n\nimport { ApiService } from './api.service';\nimport { ModelFactory } from '../models/model.factory';\nimport { Models } from \"../models/models\";\nimport { map } from \"rxjs/operators\";\nimport { Observable } from \"rxjs\";\n\n@Injectable()\nexport class BackendService {\n\n\n    protected model;\n\n    constructor(protected api: ApiService) {\n    }\n\n    // set model\n    setModel(model) {\n        this.model = model;\n    }\n\n    find(id) {\n        let constructor = Models.get(this.model.key);\n        return this.api.get(new constructor().getUri() + '/' + id).pipe(map((client: any) => {\n            client.data = ModelFactory.make(Models.get(this.model.key), client.data);\n            return client;\n        }));\n    }\n\n    save(data) {\n        if(data[data.getKey()]) {\n            return this.update(data);\n        }\n        return this.createNew(data);\n    }\n\n    update(data) {\n        let payload = data.serialize();\n        return this.api.put(data.getUri() + '/' + data[data.getKey()], payload);\n    }\n\n    createNew(data) {\n        let payload = data.serialize();\n        return this.api.post(data.getUri(), payload);\n    }\n\n    destroy(data) {\n        return this.api.delete(data.getUri() + '/' + data[data.getKey()]);\n    }\n\n    get(model = null, options: any = { page: 1 }) {\n\n\n        let requestOptions: any = {\n            params: new HttpParams()\n        };\n\n        if(options.page != 1) {\n            requestOptions.params = new HttpParams().set('page', String(options.page));\n        }\n\n        let observable;\n\n        if(model === null) {\n            observable = this.api.get(new this.model().getUri(), requestOptions);\n        } else {\n            observable = this.api.get(model.getUri(), requestOptions);\n        }\n\n        return observable.pipe(\n                map((response: any) => {\n                    let data = response.data;\n                    response.data = ModelFactory.makeFromArray(Models.get(this.model.key), data);\n                    return response;\n                })\n        );\n    }\n\n    getRelated(related, key, model = null, options = {}) {\n        if(model == null) {\n            model = this.model;\n        }\n\n        let constructor = Models.get(model.key);\n        model = ModelFactory.makeRelated(new constructor(), related, key);\n\n        return this.get(model);\n    }\n\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport { ApiService } from \"./http/api.service\";\nimport { BackendService } from \"./http/backend.service\";\nimport {CONFIG} from \"./constants\";\n\n@NgModule({\n    imports: [],\n    declarations: [],\n    exports: [],\n    providers:\n    [\n        ApiService,\n        BackendService\n    ]\n})\nexport class NgxRestModelModule {\n    public static forRoot(config): ModuleWithProviders<NgxRestModelModule> {\n        return {\n            ngModule: NgxRestModelModule,\n            providers: [{ provide: CONFIG, useValue: config}]\n        };\n    }\n}\n","export interface ModelConfig {\n    key;\n    uri;\n    hidden?;\n    relationships?;\n};\n\nexport interface Model {\n    modelConfig: ModelConfig;\n}","/*\n * Public API Surface of ngx-rest-model\n */\nexport * from './lib/ngx-rest-model.module';\nexport * from './lib/models/model.interface';\nexport * from './lib/models/serializable.interface';\nexport * from './lib/models/base-model';\nexport * from './lib/models/relationship';\n\nexport * from './lib/http/api.service';\nexport * from './lib/http/backend.service';\n\nexport * from './lib/models/models';\nexport * from './lib/models/model.factory';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.ApiService"],"mappings":"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"}